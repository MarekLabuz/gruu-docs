const{createComponent:createComponent}="undefined"!=typeof module?require("gruujs"):Gruu,GruuRouter=function(){const t=(t,e)=>t.test(e),e=t=>t.replace(/(\^|\$)/g,"").split("/").map(t=>/:[^/]*/g.test(t)&&t.slice(1)),o=(t,e,o)=>t.match(e)[0].split("/").reduce((t,e,n)=>Object.assign({},t,o[n]?{[o[n]]:e}:{})),n=t=>new RegExp(t.replace(/:[^/$]*/g,"[^/]*")),u=createComponent({subs:[],state:{locationPath:window.location.pathname},goTo(e,n){u.state.locationPath=e,u.subs.forEach(([n,u,r])=>{t(n,e)&&r(o(e,n,u))}),n||window.history.pushState(null,null,e)},addSub:t=>(u.subs.push(t),()=>{u.subs=u.subs.filter(e=>e!==t)})});return window.onpopstate=(()=>{u.goTo(window.location.pathname,!0)}),{router:u,route:(r,s)=>{const a=e(r),c=n(r);return createComponent({$children(){const e=u.state.locationPath;if(t(c,e)){const t="function"==typeof s,n=t?o(e,c,a):[];return[t?s(n):s]}return[]}})},routeSub:(r,s)=>{const a=e(r),c=n(r),i=window.location.pathname;return t(c,i)&&setTimeout(()=>{s(o(i,c,a))}),u.addSub([c,a,s])}}}();"undefined"!=typeof module&&(module.exports=GruuRouter);